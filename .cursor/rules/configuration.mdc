---
alwaysApply: true
description: 配置管理和数据持久化规范
---

# 配置管理规范

## 配置保存要求

### 自动保存配置

配置按串口号进行保存和加载：
- 切换串口号时，自动加载该串口对应的配置
- 修改任何配置后，自动保存到当前串口号对应的配置中
- 每个串口号保存独立的串口设置、接收设置、发送设置

### 配置文件格式

建议使用JSON格式存储配置，结构应包括：
- 上次使用的端口
- 各端口的独立配置
- 全局设置和历史记录

## 菜单功能

### 配置导入导出

应在菜单栏提供以下功能：

1. **导出配置**
   - 菜单路径: `文件 -> 导出配置`
   - 将当前所有配置导出为JSON文件
   - 支持用户选择保存路径

2. **导入配置**
   - 菜单路径: `文件 -> 导入配置`
   - 从JSON文件导入配置
   - 导入后立即应用配置

## 配置加载流程

1. 程序启动时自动加载上次保存的配置
2. 如果配置文件不存在，使用默认配置
3. 配置文件位置建议：用户目录或程序同级目录

## 实现建议

在 [src/utils](mdc:src/utils) 目录下创建配置管理工具类：
- `config_manager.py`: 负责配置的读取、保存、导入、导出